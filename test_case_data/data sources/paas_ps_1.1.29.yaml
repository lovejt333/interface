# Example YAML to get you started quickly.
# Be aware that YAML has indentation based scoping.
# Code completion support is available so start typing for available options.
swagger: '2.0'

# This is your document metadata
info:
  version: "1.1.29"
  title: 基础服务-产品服务
host: localhost
basePath: /ps/v1
schemes:
  - http
produces:
  - application/json
consumes:
  - application/json

paths:
  /producttype:
    post:
      summary: 新建产品分类
      description: 新建产品分类 全库品类不能重复  分类下有属性模板不能新增子分类
      tags:
        - 产品分类
      parameters:
        - name: productType
          in: body
          required: true
          description: 新增产品分类对象  
          schema:
            $ref: '#/definitions/productType'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productTypeResp'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
            
  /producttype/{typeId}:       
    get:
      summary: 查询产品分类
      description: 查询产品分类
      tags:
        - 产品分类
      parameters:
        - name: typeId
          in: path
          required: true
          description: 分类ID
          type: integer
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productTypeResp'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
    put:
      summary: 修改产品分类
      description: 修改产品分类 全库品类不能重复  如果父分类下已有属性，不能移动到该分类
      tags:
        - 产品分类
      parameters:
        - name: typeId
          in: path
          required: true
          description: 分类ID
          type: integer
        - name: productType
          in: body
          required: true
          description: 产品分类对象  
          schema:
            $ref: '#/definitions/productTypePut'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productTypeResp'  
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
    
    
    
    delete:
      summary: 删除产品分类
      description: 删除产品分类 
      tags:
        - 产品分类
      parameters:
        - name: typeId
          in: path
          required: true
          description: 分类ID
          type: integer
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/rows'  
        default:
          description: error 错误提示语参考交互设计
          schema:
            $ref: '#/definitions/errorModel'  
  
  /producttype/{typeId}/typeId/{pTypeId}: 
    put:
      summary: 移动产品分类
      description: 移动产品分类 如果父分类下已有属性，不能移动到该分类
      tags:
        - 产品分类
      parameters:
        - name: typeId
          in: path
          required: true
          description: 分类ID
          type: integer
        - name: pTypeId
          in: path
          required: true
          description: 父分类ID
          type: integer 
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/rows'  
        default:
          description: error 错误提示语参考交互设计
          schema:
            $ref: '#/definitions/errorModel'
            
  /producttyperepeat:
    get:
      summary: 校验产品分类名称是否重复
      description: 校验产品分类名称是重复
      tags:
        - 产品分类
      parameters:
        - name: typeId
          in: query
          type: integer
          required: false
          description: 分类ID
        - name: typeName
          in: query
          type: string
          required: true
          maxLength: 20
          description: 分类名称
      responses:
        200:
          description: success 
          schema:
            properties:
              flag:
                type: string
                description:  表示分类名称无重复
                enum:
                  - "1"
        default:
          description: error  错误提示语参考交互设计
          schema:
            $ref: '#/definitions/errorModel'
            
          
  /producttypes:
    get:
      summary: 查询产品分类
      description: 查询产品分类 不传父ID返回所有分类
      tags:
        - 产品分类
      parameters:
        - name: pTypeId
          in: query
          type: integer
          required: false
          description: 父ID
      responses:
        200:
          description: success 
          schema:
            $ref: '#/definitions/productTypes'  
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
            
  /productattrtemp:
    post:
      summary: 新增模板属性
      description: 新增模板属性  同一分类下不能重名  每个分类下属性排序号从1开始累加
      tags:
        - 产品模板属性
      parameters:
        - name: productAttrTemp
          in: body
          required: true
          description: 新增产品属性对象  
          schema:
            $ref: '#/definitions/productAttrTempReq'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productAttrTempResp'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
            
  /attrtemprepeat:
    get:
      summary: 校验分类属性是否重复
      description: 校验分类属性是否重复
      tags:
        - 产品模板属性
      parameters:
        - name: attrId
          in: query
          type: integer
          description: 属性ID
          required: false
          format: int32
        - name: typeId
          type: integer
          in: query
          description: 属性所属分类ID
          format: int32
          required: true
        - name: attrName
          in: query
          type: string
          description: 属性名称
          required: true
          maxLength: 20
      responses:
        200: 
          description: success  
          schema:
            properties:
              flag:
                type: string
                enum:
                  - "1"
                  - "0"
                description: 1为不重复 0为重复
        default:
          description: error 有重复的返回错误提示语参考交互设计
          schema:
            $ref: '#/definitions/errorModel'  
    
  /productattrtemporder:
    put:
      summary: 修改模板属性排序
      description: 修改模板属性排序 
      tags:
        - 产品模板属性
      parameters:
        - name: productAttrTemp
          in: body
          required: true
          description: 修改产品属性排序  交换两个属性的顺序
          schema:      
            $ref: '#/definitions/productattrorders'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productattrorders'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
  
  /productattrtemp/{attrId}:
    get:
      summary: 模板属性详情
      description: 模板属性详情
      tags:
        - 产品模板属性
      parameters:
        - name: attrId
          in: path
          type: integer
          description: 属性Id
          required: true
      responses:
        200: 
          description: success
          schema:
            $ref: '#/definitions/productAttrTempResp'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
    delete:
      summary: 删除模板属性
      description: 删除模板属性  属性无效状态(停用)后才能删除
      tags:
        - 产品模板属性
      parameters:
        - name: attrId
          in: path
          type: integer
          description: 属性Id
          required: true
      responses:
        200: 
          description: success
          schema:
            $ref: '#/definitions/rows'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
    
    put:
      summary: 修改模板属性
      description: 修改模板属性 同一分类下不能重名
      tags:
        - 产品模板属性
      parameters:
        - name: attrId
          in: path
          type: integer
          required: true
          description: 属性ID
        - name: productAttrTemp
          in: body
          required: true
          description: 修改产品属性对象  
          schema:      
            $ref: '#/definitions/productAttrTempReq'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productAttrTempResp'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
    
  /producttype/{typeId}/productattrtemps:
    get:
      summary: 产品分类下模板属性集合
      description: 产品分类下模板属性集合 返回启用状态属性    默认以创建时间倒序
      tags:
        - 产品模板属性
      parameters:
        - name: typeId
          in: path
          type: integer
          description: 产品分类Id
          required: true
        - name: attrIsValid
          in: query
          type: string
          description: 启用状态 此参数为空时返回分类下所有属性 为1时返回有效属性
          required: false
        - name: attrType
          in: query
          type: string
          description: 0:扩展属性 1:销售属性
      responses:
        200: 
          description: success
          schema:
            $ref: '#/definitions/productAttrTemps'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
  
  /product:
    post:
      summary: 发布产品
      description: 发布产品   供应商
      tags:
        - 产品
      parameters:
        - name: productPost
          in: body
          required: true
          description: 新增产品请求对象
          schema:
            $ref: '#/definitions/productPost'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productPut'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
  
  /productname:
    get:
      summary: 校验产品名称是否重复
      description: 校验产品名称是否重复  检验同一个partnerId下是否有重复产品名称
      tags:
        - 产品
      parameters:
        - name: partnerId
          in: query
          type: integer
          required: true
          description: 供应商或者服务商ID 
        - name: productName
          in: query
          type: string
          required: true
          description: 产品名称
        - name: productId
          in: query
          type: string
          required: false
          description: 产品UUID
      responses:
        200: 
          description: success
          schema:
            properties:
              flag:
                type: string
                enum:
                  - "1"
                  - "0"
                description: 1为不重复 0为重复
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
          
      
  /product/{uuid}:
    get:
      summary: 查询产品详情
      description: 查询产品详情  供应商商品详情
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          required: true
          description: 产品UUID
      responses:
        200: 
          description: success
          schema:
            $ref: '#/definitions/productDetail'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
            
    delete:
      summary: 删除产品
      description: 删除产品 供应商 已上架不能删除
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          required: true
          description: 产品UUID
      responses:
        200: 
          description: success
          schema:
            $ref: '#/definitions/rows'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
            
    put:
      summary: 修改产品
      description: 修改产品  供应商
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          required: true
          description: 产品UUID
        - name: product
          in: body
          required: true
          description: 产品信息
          schema:
            $ref: '#/definitions/productPut'
      responses:
        200: 
          description: success
          schema:
            $ref: '#/definitions/productDetail'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
  
  /product/{uuid}/abspath:
    get:
      summary: 查询产品分类路径
      description: 查询产品分类路径
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          required: true
      responses:
        200: 
          description: success
          schema:
            $ref: '#/definitions/absPath'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
            
  /product/{uuid}/auth:
    get:
      summary: 查询产品是否已授权
      description: 查询产品是否授权  有效期大于当前日期
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          required: true
        - name: cpPartnerId
          in: query
          type: integer
          required: false
          description: 供应商ID
        - name: spPartnerId
          in: query
          type: integer
          required: false
          description: 服务商ID
      responses:
        200: 
          description: success
          schema:
            properties:
              auth:
                type: string
                description: 1为已授权 0为示授权
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
            
  /products:
    get:
      summary: 查询产品列表
      description: 查询产品列表 默认按创建时间倒序  供应商、运营平台、服务商
      tags:
        - 产品
      parameters:
        - name: uuids
          in: query
          type: string
          description: 产品uuid，多个uuid以逗号分割
        - name: typeId
          in: query
          type: string
          description: 产品分类 多个以逗号隔开
        - name: flowId
          in: query
          type: integer
          description: 流程模板ID
        - $ref: '#/parameters/partnerType'
        - $ref: '#/parameters/partnerIds'
        - $ref: '#/parameters/productName'
        - $ref: '#/parameters/productType'
        - $ref: '#/parameters/tempStatus'
        - $ref: '#/parameters/saleFlag'
        - $ref: '#/parameters/pageNum'
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/sort'
        - $ref: '#/parameters/createTimeStart'
        - $ref: '#/parameters/createTimeEnd'
        - $ref: '#/parameters/specMinPrice'
        - $ref: '#/parameters/specMaxPrice'
        - $ref: '#/parameters/productCode'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productPages'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'    
  
  /products-detail:
    get:
      summary:   批量查询产品详情 
      description: 批量查询产品详情 供应商产品
      tags:
        - 产品
      parameters:
        - name: uuids
          in: query
          type: string
          required: true
          description: 产品uuid，多个uuid以逗号分割
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              $ref: '#/definitions/productDetail'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
  
  #/cpproductgroup:
  #  post:
  #    summary: 供应商发布产品组合
  #    description: 供应商发布产品组合
  #    tags:
  #     - 产品
  #   parameters:
  #    - name: productPost
  #       in: body
  #       required: true
  #       description: 新增产品请求对象
  #       schema:
  #         $ref: '#/definitions/cpProductGroupPost'
  #    responses:
  #      200:
  #        description: success
  #        schema:
  #          $ref: '#/definitions/cpProductGroupResp'
  #      default:
  #        description: error
  #        schema:
  #          $ref: '#/definitions/errorModel'  
  
  /productnum:
    get:
      summary: 查询供应商 服务商产品数量   
      description: 查询供应商 服务商产品数量 
      tags:
        - 产品
      parameters:
        - name: partnerIds
          in: query
          type: string
          required: true
          description: 服务商ID 多个以逗号分隔 id1,id2
        - name: saleFlag
          in: query
          type: string
          required: false
          description: 0为下架 1为上架
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              properties:
                partnerId:
                  type: integer
                  description: 供应商或者服务商ID
                num:
                  type: integer
                  description: 产品总数
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
  
  /products-stock:
    get:
      summary: 批量查询产品库存   
      description: 批量查询产品库存  统计每个产品所属实例库存总和
      tags:
        - 产品
      parameters:
        - name: uuids
          in: query
          type: string
          required: true
          description: 产品uuid，多个uuid以逗号分割
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              properties:
                uuid:
                  type: string
                  description: 产品UUID
                stock:
                  type: integer
                  description: 库存
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
  
    put:
      summary: 批量修改库存
      description: 批量修改库存  同步方法
      tags:
        - 产品
      parameters:
        - name: stock
          in: body  
          required: true
          schema:
            $ref: '#/definitions/stock'
      responses:
        200:
          description: success
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
  
  /productstock/{productSpecUuid}:
    get:
      summary: 查询产品最小库存
      description: 查询产品最小库存 被组合实例的最小库存 用于订单下单校验
      tags:
        - 产品
      parameters:
        - name: productSpecUuid
          in: path
          required: true
          type: string
          description: 产品实例UUID
      responses:
        200:
          description: success
          schema:
            type: integer
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
            
  /sproductauth:
    get:
      summary: 服务商查询已授权产品列表
      description: 服务商查询已授权产品列表  已授权并已上架产品 默认按创建时间倒序
      tags:
        - 产品
      parameters:
        - name: partnerId
          in: query
          type: integer
          required: true
          description: 服务商ID
        - $ref: '#/parameters/productName'
        - $ref: '#/parameters/productType'
        - name: cpPartnerId
          in: query
          type: integer
          required: false
          description: 供应商ID
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productPages'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'   
  
 # /sproducts:
 #   get:
 #     summary: 根据合作伙伴类型查询产品列表
 #     description: 根据合作伙伴类型查询产品列表 不包含草稿 默认按创建时间倒序
 #     tags:
 #       - 产品
 #     parameters:
 #       - $ref: '#/parameters/partnerIds'
 #       - $ref: '#/parameters/partnerType'
 #       - $ref: '#/parameters/typeId'
 #       - $ref: '#/parameters/productName'
 #       - $ref: '#/parameters/saleFlag'
 #       - $ref: '#/parameters/pageNum'
 #       - $ref: '#/parameters/pageSize'
 #       - $ref: '#/parameters/sort'
 #     responses:
 #       200:
 #         description: success
 #         schema:
 #           $ref: '#/definitions/productPages'
 #       default:
 #         description: error
 #         schema:
 #           $ref: '#/definitions/errorModel'  
  
  /productgroup:
    post:
      summary: 服务商发布组合产品
      description: 服务商发布组合产品
      tags:
        - 产品
      parameters:
        - name: productPost
          in: body
          required: true
          description: 新增产品请求对象
          schema:
            $ref: '#/definitions/spProductGroupPost'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/spProductGroupPut'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'      
    
  /productgroup/{uuid}:
    get:
      summary: 查询组合产品
      description: 查询组合产品
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          description: 产品UUID
          required: true
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/productGroupDetail'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'      
    delete:
      summary: 删除组合产品
      description: 删除组合产品   已上架产品不能删除
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          description: 产品UUID
          required: true
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/rows'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel' 
    
    put:
      summary: 修改组合产品
      description: 修改组合产品
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          type: string
          description: 产品UUID
          required: true
        - name: product
          in: body
          description: 组合产品对象
          required: true
          schema:
            $ref: '#/definitions/spProductGroupPut'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/spProductGroupPut'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
    
  /productnew/{uuid}:
    post:
      summary: 复制产品
      description: 复制产品  根据UUID查询产品是单个产品还是组合产品single为单个产品 group为组合产品,新产生的产品名称在原来的基础追加“ 副本”
      tags:
        - 产品
      parameters:
        - name: uuid
          in: path
          required: true
          type: string
          description: 产品UUID
      responses:
        200:
          description: success
          schema:
            properties:
              uuid:
                type: string
                description: 生产新产品UUID
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'
      
  /authproduct:
    post:
      summary: 新增服务商产品授权
      description: 新增服务商产品授权  授权记录不存在做新增， 已存在更新授权有效期时间
      tags:
        - 产品授权
      parameters:
        - name: productPost
          in: body
          required: true
          description: 新增服务商产品授权请求对象
          schema:
            $ref: '#/definitions/spProductAuthPost'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/spProductAuthResp'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'      
    
    delete:
      summary: 取消服务商产品授权
      description: 取消服务商产品授权
      tags:
        - 产品授权
      parameters:
        - name: spProductAuthList
          in: body
          required: true
          schema:
            $ref: '#/definitions/spProductAuthPost'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/rows'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'   
            
  /authpartner:
    post:
      summary: 新增服务商企业授权
      description: 新增服务商企业授权  授权记录不存在时做新增  授权记录已存在时 更新authDate
      tags:
        - 产品授权
      parameters:
        - name: partnerauth
          in: body
          required: true
          schema:
            $ref: '#/definitions/partnerAuthPost'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/partnerAuthResp'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'  
            
    delete:
      summary: 取消服务商企业授权
      description: 取消服务商企业授权
      tags:
        - 产品授权
      parameters:
        - name: partnerauth
          in: body
          required: true
          schema:
            type: array
            items:
              $ref: '#/definitions/partnerAuth'  
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/rows'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'    
            
  /spauth:
    get: 
      summary: 服务商获取供应商授权状态
      description: 服务商获取供应商授权状态
      tags:
        - 产品授权
      parameters:
        - name: partnerId
          in: query
          type: integer
          required: true
          description: 服务商ID
        - name: cpPartnerIds
          in: query
          type: string
          required: true
          description: 供应商ID  多个ID以逗号分隔
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              properties:
                spPartnerId:
                  type: integer
                cpPartnerId:
                  type: integer
                authFlag:
                  type: string
                  description: 1：已授权  0：未授权
        default:
            description: error
            schema:
              $ref: '#/definitions/errorModel'  
  
  /saleflag:
    put:
      summary: 产品上下架
      description: 产品上下架  如果产品为草稿，上架操作tempStatus状态变更为1
      tags:
        - 产品
      parameters:
        - name: productUuids
          in: body
          description: 需要上下架产品 
          required: true
          schema:
            $ref: '#/definitions/saleflagProdcut'
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/rows'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'    
  
  /productsaleflag:
    put:
      summary: 批量下架产品
      description: 批量下架产品   根据企业批量下架产品 下架该企业的产品，以及关联产品都下架
      tags:
        - 产品
      parameters:
        - name: data
          in: body
          required: true
          schema:
            properties:
              partnerId:
                type: integer
                description: 合作伙伴ID
              partnerType:
                type: string
                description: 合作伙伴类型 "0010"：供应商；"0100"：服务商；"0110"：供应商+服务商；"0001"
      responses:
        200:
          description: success
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'    
              
  /verify-saleflag:
    post:
      summary: 产品上架校验
      description: 产品上架校验  
      tags:
        - 产品
      parameters:
        - name: verifySaleflag
          in: body
          schema:
            $ref: '#/definitions/verifySaleflag'
      responses:
        200:
          description: success
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel'        
        
  /sellattrs:
    get:
      summary: 根据实例UUID查询销售属性
      description: 根据实例UUID查询销售属性
      tags:
        - 产品
      parameters:
        - name: productSpecUuids
          in: query
          type: string
          required: true
          description: 产品实例UUID  多个以逗号隔开
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              $ref: '#/definitions/sellattrs'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel' 
  
  /cpProduct/sp/{productSpecUuid}:
    get:
      summary: 根据服务商实例ID查询绑定供应商产品信息
      description:  根据服务商实例ID查询绑定供应商产品信息
      tags:
        - 产品
      parameters:
        - name: productSpecUuid
          in: path
          type: string
          required: true
          description: 产品实例UUID
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              $ref: '#/definitions/cpProductInfo'
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel' 
  
  /productsales/{productUuids}:
    get:
      summary: 查询供应商 服务商产品销量
      description:  查询供应商 服务商产品销量  所有产品销量
      tags:
        - 产品
      parameters:
        - name: productUuids
          in: path
          type: string
          required: true
          description: 产品UUID 多个以逗号分隔
      responses:
        200:
          description: success
          schema:
            type: array
            items:
              properties:
                productSales:
                  type: integer
                  description: 产品销量
                uuid:
                  type: string
                  description: 产品UUID
        default:
          description: error
          schema:
            $ref: '#/definitions/errorModel' 
parameters:
  partnerIds:
    name: partnerIds
    in: query
    type: string
    description: 合作伙伴ID集合  逗号隔开  id1,id2
    required: false
  
  partnerType:
    name: partnerType
    in: query
    type: string
    enum:
    - "0010"
    - "0100"
    description: 合作伙伴类型 供应商:"0010"    服务商:"0100"
    required: false   
  
  productType:
    name: productType
    in: query
    type: string
    description: 产品类型  single:单产品 group:捆绑产品
    enum:
     - "single"
     - "group"
  
  pageNum:
    name: pageNum
    type: integer
    format: int32
    in: query
    required: false
    description: 当前页
    default: 1
    
  pageSize:
    name: pageSize
    type: integer
    format: int32
    in: query
    required: false
    default: 10
    description: 每页记录数
    
  sort:
    name: sort
    in: query
    description: 排序方式，json格式：{"fileName":"desc"} ，Url编码   支持多字段排序
    required: false
    type: string
    format: json
    
  saleFlag:
    name: saleFlag
    in: query
    type: string
    description: 1上架  0下架
    enum:
    - "1"
    - "0"
    
  tempStatus:
    name: tempStatus
    in: query
    type: string
    description: 1正式产品  0草稿
    enum:
    - "1"
    - "0"
  productName:
    name: productName
    in: query
    type: string
    description: 产品名称
    maxLength: 20
 
  createTimeStart:
    name: createTimeStart
    in: query
    type: string
    format: date-time
    description: 创建时间(开始时间)
    
  createTimeEnd:
    name: createTimeEnd
    in: query
    type: string
    format: date-time
    description: 创建时间(结束时间)
    
  productCode:
    name: productCode
    in: query
    type: string
    description: 产品编码  精确查询
    
  specMinPrice:
    name: specMinPrice
    in: query
    type: number
    format: float(10,2)
    description: 产品所属实例最低售价 
    
  specMaxPrice:
    name: specMaxPrice
    in: query
    type: number
    format: float(10,2)
    description: 产品所属实例最高售价
    
definitions:
  
  sellattr:
    type: object
    properties:
      attrName:
        type: string
      attrValue:
        type: string
        
  sellattrs:
    type: object
    properties:
      productSpecUuid:
        type: string
        description: 实例UUID
      productSpecName:
        type: string
        description: 产品实例名称
      sellPrice:
        type: number
        description: 实例价格
      sellattrs:
        type: array
        items:
          $ref: '#/definitions/sellattr'
      typeId:
        type: integer
        description: 产品分类
      typeName:
        type: string
        description: 产品分类名称
      productCode:
        type: string
        description: 产品编码
      productName:
        type: string
        description: 产品名称
      productType:
        type: string
        description: 产品类型
      images:
        type: string
        description: 产品图片
      qualification:
        type: string
        description: 所需资质
      partnerId:
        type: integer
        description: 服务商ID
    
  
  cpProductInfo:
    type: object
    properties:
      typeName:
        type: string
        description: 产品分类名称
      productSpecUuid:
        type: string
        description: 产品实例UUid
      stock:
        type: integer
        description: 实例库存
    allOf:
      - $ref: '#/definitions/product'
  
  absPath:
    type: array
    items:
      properties:
        typeId:
          type: integer
        typeName:
          type: string
  
  saleflagProdcut:
    type: object
    properties:
      productUuids:
        type: array
        items:
          properties:
            productUuid:
              type: string
              description: 产品UUID
      saleFlag:
        type: string
        description: 1上架操作  0下架操作
        enum:
          - "1"
          - "0"
        
  spProductAuth:
    type: object
    description: 服务商授权产品对象
    allOf:
      - $ref: '#/definitions/partnerAuth'
    properties:
      uuid:
        type: string
        minLength: 32
        maxLength: 32
        description: 产品UUID
      
  
  spProductAuthReq:
    type: object
    description: 服务商授权产品对象
    required:
    - authDate
    allOf:
      - $ref: '#/definitions/spProductAuth'
    properties:
      authDate:
        type: string
        format: date-time
        description: 授权有效期
      
  spProductAuthPost:
    type: array
    description: 授权请求集合对象
    items:
      $ref: '#/definitions/spProductAuthReq'
       
  spProductAuthResp:
    type: array
    description: 服务商授权产品对象
    items:
      allOf:
      - $ref: '#/definitions/spProductAuth'
      properties:
        authId:
          type: integer
          description: 产品授权记录ID
  
  partnerAuthReq:
    type: object
    description: 新增授权企业对象
    required:
    - authDate
    properties:
      authDate:
        type: string
        format: date-time
        description: 授权有效时间
    allOf:
      - $ref: '#/definitions/partnerAuth'
      
  partnerAuthPost:
    type: array
    description: 服务商授权企业请求对象
    items:
      $ref: '#/definitions/partnerAuthReq'
  
  partnerAuthResp:
    type: array
    description: 服务商授权企业返回对象
    items:
      allOf:
      -  $ref: '#/definitions/partnerAuthReq'
      properties:
        id:
          type: integer
          description: 记录ID
  
  partnerAuth:    
    type: object
    description: 授权企业对象
    required:
    - spPartnerId
    - cpPartnerId
    properties:
      spPartnerId:
        type: integer
        format: int32
        description: 服务商合作伙伴ID
      cpPartnerId:
        type: integer
        format: int32
        description: 供应商商合作伙伴ID
      
  
  productTypeSup:
    type: object
    properties:
      createDate:
        type: string
        format: date-time
        description: 创建时间
      modifyUserid:
        type: string
        description: 修改人用户ID
        format: int32
      modfiyDate:
        type: string
        format: date-time
        description: 修改时间
          
    
  productType:
    type: object
    description: 产品分类 
    required:
    - typeName
    - pTypeId
    properties:
      typeName:
        type: string
        description: 分类名称
        minLength: 1
        maxLength: 20
      pTypeId:
        type: integer
        format: int32
        description: 上级分类ID 当前分类为一级分类pTypeId为0
      typeDesc:
        type: string
        description: 分类描述
        maxLength: 400
      createUserid:
        type: integer
        description: 创建人用户ID
        format: int32
  
        
  productTypePut:
    type: object
    description: 产品分类
    properties:
      typeName:
        type: string
        description: 分类名称
        minLength: 1
        maxLength: 20
      modifyUserid:
        type: string
        description: 修改人用户ID
        format: int32
      pTypeId:
        type: integer
        description: 父分类ID
        format: int32
    
  productTypes:
    type: array
    description: 产品分类集合
    items:
      $ref: '#/definitions/productTypeResp'
      
  productTypeResp:
    type: object
    description: 新增产品分类返回对象
    allOf:
    - $ref: '#/definitions/productType'
    - $ref: '#/definitions/productTypeSup'
    properties:
      typeId:
        type: integer
        description: 分类ID
        
  productAttrTempResp:
    type: object
    description: 产品属性信息模板结果对象
    allOf:
    - $ref: '#/definitions/productAttrTempReq'
    properties:
      attrId:
        type: integer
        description: 属性ID
      createTime:
        type: string
        format: date-time
        description: 创建时间
      modifyTime:
        type: string
        format: date-time
        description: 修改时间
        
  
  productAttrTemps:
    type: array
    description: 模板属性集合
    items:
      $ref: '#/definitions/productAttrTempResp'
  
  
  productattrorders:
    type: object
    description: 属性排序请求对象
    properties:
      upOrder:
        type: object
        description: 升序属性ID
        properties:
          attrId:
            type: integer
          attrOrder:
            type: integer
      downOrder:
        type: object
        description: 降序属性ID
        properties:
          attrId:
            type: integer
          attrOrder:
            type: integer
    
  productAttrTempReq:
    type: object
    description: 产品属性信息模板对象
    required:
    - typeId
    - attrName
    properties:
      typeId:
        type: integer
        description: 产品分类ID
        format: int32
      attrName:
        type: string
        description: 属性名称
        minLength: 1
        maxLength: 20
      attrFormType:
        type: string
        description: 属性表单输入方式  checkbox:复选框  radio:选择器(单选) text:文本 date:期限
        enum:
          - "checkbox"
          - "radio"
          - "text"
          - "date"
      attrLayerType:
        type: string
        description: 属性布局方式  '1' 单列  '2' 双列
        enum:
          - "1"
          - "2"
        maxLength: 1
      attrIsValid:
        type: string
        description: 是否有效 0无效(停用) 1有效(启用)  默认为有效
        enum:
          - "1"
          - "0"
      attrOrder:
        type: integer
        description: 属性排序
        format: int32
      attrType:
        type: string
        maxLength: 1
        description: 属性类型 1为销售属性/价格属性   0为公共属性
      attrValue:
        type: string
        description: 属性可选值 多个值逗号分隔
        maxLength: 100
      required:
        type: string
        description: 属性是否必填 1必填 0选填 
        enum:
          - "1"
          - "0"
  
  productSetupAttribute:
    type: object
    description: 产品引用模板属性对象
    required:
    - attrId
    properties:
      attrId:
        type: integer
        format: int32
        description: 模板属性ID
      customAttrValue:
        type: string
        maxLength: 200
        description: 自定义属性可选值
      fillValue:
        type: string
        description: 属性填写值
        maxLength: 20
  
  productSetupAttributeResp:
    type: object
    description: 产品引用模板属性对象
    properties:
      id: 
        type: integer
        description: 自增长记录ID
      productUuid:
        type: string
        description: 产品UUID
    allOf:
    - $ref: '#/definitions/productSetupAttribute'
       
  productCustomAttribute:
    type: object
    description: 产品自定义属性
    required:
    - attrName
    - attrValue
    - attrFormType
    - attrLayerType
    - attrType
    properties: 
      attrName:
        type: string
        description: 自定义属性名称
        maxLength: 20
      attrValue:
        type: string
        description: 自定义属性可选值 
        maxLength: 200
      attrFormType:
        type: string
        description: 自定义属性输入方式
      attrLayerType:
        type: string
        description: 自定义属性布局方式
      attrType:
        type: string
        description: 属性类型  '0' 公共属性 '1' 销售属性
        enum:
          - "1"
          - "0"
      fillValue:
        type: string
        description: 属性填写值
        maxLength: 20
      attrOrder:
        type: integer
        format: int32
        description: 自定义属性排序 产品对应的自定义公共属性、销售属性分别从1开始垒加
      required:
        type: string
        description: 是否必填 1为必填 0为选填
        enum:
          - "1"
          - "0"
  
  verifySaleflag:
    type: object
    description: 上下架校验
    properties:
      partnerType:
        type: string
        enum:
          - "0010"
          - "0100"
        description: 0010供应商  0100服务商
      productUuid:
        type: string
        description: 产品uuid
        
  productCustomAttributeResp:
    type: object
    description: 产品自定义属性
    properties: 
      customAttrId:
        type: integer
        description: 自定义属性记录ID
      productUuid:
        type: string
        description: 产品UUID
    allOf:
    - $ref: '#/definitions/productCustomAttribute'
    
  productSpecAttribute:
    type: object
    description: 产品实例属性 
    required:
      - code
    properties:
      attrId:
        type: integer
        description: 模板属性ID
      attrValue:
        type: string
        description:  模板属性值
        maxLength: 200
      customAttrId:
        type: integer
        description: 自定义属性ID
      isCustomAttr:
        type: string
        description: 是否为自定义属性  0为模板属性 1为自定义属性
        enum:
          - "1"
          - "0"
      code:
        type: integer
        description: 自定义属性的临时序号 从0开始
  
  productSpecAttributeResp:
    type: object
    description: 产品实例属性
    properties:
      id:
        type: integer
        description: 自增长记录ID
      productSpecUuid:
        type: string
        description: 产品实例UUID
      customAttrId:
        type: integer
        description: 自定义属性ID
      attrId:
        type: integer
        description: 模板属性ID
      attrValue:
        type: string
        description:  属性值
        maxLength: 20
      attrName:
        type: string
        description: 属性名称
        maxLength: 20
      isCustomAttr:
        type: string
        description: 是否为自定义属性  0为模板属性 1为自定义属性
        enum:
          - "1"
          - "0"
  
  productSpecAttributePut:
    type: object
    description: 修改产品属性请求对象
    allOf:
    - $ref: '#/definitions/productSpecAttributeResp'
    properties:
      code: 
        type: integer
        description: 自定义属性前端添加序号从0开始
        
  productPost:
    type: object
    description: 新建产品请求对象
    allOf:
    - $ref: '#/definitions/product'
    properties:
      flowId:
        type: integer
        description: 流程模板ID
      productSetupAttributes:
        type: array
        description: 模板属性集合
        items:
          $ref: '#/definitions/productSetupAttribute'
      productCustomAttributes:
        type: array
        description: 自定义属性集合
        items:
          $ref: '#/definitions/productCustomAttribute'
      productSpecs:
        type: array
        items:
          $ref: '#/definitions/productSpecPost'
  
  
  productPut:
    type: object
    description: 产品基础信息返回对象
    allOf:
    - $ref: '#/definitions/product'
    - $ref: '#/definitions/productStatus'
    properties:
      flowId:
        type: integer
        description: 流程模板ID
      uuid:
        type: string
        description: 产品UUID
      productSetupAttributes:
        type: array
        description: 模板属性集合
        items:
          $ref: '#/definitions/productSetupAttributeResp'
      productCustomAttributes:
        type: array
        description: 自定义属性集合
        items:
          $ref: '#/definitions/productCustomAttributeResp'
      productSpecs:
        type: array
        items:
          $ref: '#/definitions/productSpecPut'
  
  productSpecPut:
    type: object
    description: 产品实例集合
    allOf:
    - $ref: '#/definitions/productSpecResp'
    properties:
      productSpecAttributes:
        type: array
        items:
          $ref: '#/definitions/productSpecAttributePut'   
    
  productSetupAttrDeail:
    type: object
    description: 产品引用模板属性详情   
    allOf:
    - $ref: '#/definitions/productAttrTempResp'
    properties:
      id: 
        type: integer
        description: 自增长ID
      productUuid:
        type: string
        description: 产品UUID
      customAttrValue:
        type: string
        description: 自定义属性可选值 修改模板属性可选值时此参数为必填  a,b,c以逗号分割(销售属性可修改)
      fillValue:
        type: string
        description: 属性填写值 
        maxLength: 20
  
  productDetail:
    type: object
    description: 产品详情
    allOf:
    - $ref: '#/definitions/product'
    - $ref: '#/definitions/productStatus'
    properties:
      uuid:
        type: string
        description: 产品UUID
      typeName:
        type: string
        description: 产品分类名称
      productSetupAttributes:
        type: array
        description: 模板属性集合  attrEnum等于模板属性可选值加自定义属性可选值
        items:
          $ref: '#/definitions/productSetupAttrDeail'
      productCustomAttributes:
        type: array
        description: 自定义属性集合
        items:
          $ref: '#/definitions/productCustomAttributeResp'
      productSpecs:
        type: array
        items:
          $ref: '#/definitions/productSpecPut'
      WorkProcessResp:
        $ref: '#/definitions/WorkProcessResp'
        
  WorkProcessResp:
    type: object
    description: 工单流程响应实体
    properties:
      processName:
        type: string
        description: 流程名称
      processType:
        type: integer
        description: 流程类型，1：服务工单流程；2：实施工单流程
      gmtCreate:
        type: string
        format: date-time
        description: 创建时间
      gmtModified:
        type: string
        format: date-time
        description: 修改时间
      empCreate:
        type: integer
        description: 创建人员工id
      empModified:
        type: integer
        description: 修改人员工id
      processId:
        type: integer
        description: 流程ID
      partnerId:
        type: integer
        description: 企业id
      status:
        type: integer
        description: 流程状态，0：停用；1：启用
      empCreateName:
        type: string
        description: 创建员工姓名
      stages:
        type: array
        items:
          type: object
          description: 流程阶段
          properties:
            stageId:
              type: integer
              description: 阶段ID
            stageOrder:
              type: integer
              description: 排序号
            stageName:
              type: string
              description: 阶段名称    
      
  productSpecResp:
    type: object
    description: 产品实例基础信息返回对象 
    properties:
      uuid:
        type: string
        description: 产品实例UUID
      productUuid:
        type: string
        description: 产品UUID
    allOf:
    - $ref: '#/definitions/productSpec'
  
  spProductSpecPut:
    type: object
    description: 产品实例基础信息返回对象 库存取被绑定供应商实例最小库存数
    properties:
      uuid:
        type: string
        description: 产品实例UUID
      productUuid:
        type: string
        description: 产品UUID
      specUuidList:
        type: array
        description: 被绑定供应商实例UUID
        items:
          type: string
    allOf:
    - $ref: '#/definitions/productSpec'
  
  spProductSpecResp:
    type: object
    description: 产品实例基础信息返回对象 库存取被绑定供应商实例最小库存数
    properties:
      uuid:
        type: string
        description: 产品实例UUID
      productUuid:
        type: string
        description: 产品UUID
      specLinkUuids:
        type: array
        description: 被绑定供应商实例
        items:
          $ref: '#/definitions/specLinkUuids'
      cpPsTotalSellPrice:
        type: number
        format: float
        description: 供应商实例价格之和  后台计算服务商某个实例组合供应商实例价格 供前端展示
    allOf:
    - $ref: '#/definitions/productSpec'
      
        
  
  spProductGroupPost:
    type: object
    description: 服务商新建产品请求对象
    allOf:
    - $ref: '#/definitions/product'
    properties:
      productSetupAttributes:
        type: array
        description: 模板属性集合
        items:
          $ref: '#/definitions/productSetupAttribute'
      productCustomAttributes:
        type: array
        description: 自定义属性集合  服务商只有自定义公共属性
        items:
          $ref: '#/definitions/productCustomAttribute'
      productSpecs:
        type: array
        items:
          $ref: '#/definitions/spProductSpecPost'
    #productSpecPost
  
  spProductSpecPost:
    type: object
    description: 产品实例集合
    allOf:
    - $ref: '#/definitions/productSpec'
    properties:
      specUuidList:
        type: array
        items:
          type: string
          description: 服务商实例对应供应商实例集合
      #productSpecAttributes:
      #  type: array
      #  items:
      #    $ref: '#/definitions/spProductSpecAttribute'
  
  
  productGroupDetail:
    type: object
    description: 产品详情
    allOf:
    - $ref: '#/definitions/product'
    - $ref: '#/definitions/productStatus'
    properties:
      uuid:
        type: string
        description: 产品UUID
      typeName:
        type: string
        description: 产品分类名称
      productSetupAttributes:
        type: array
        description: 模板属性集合  attrEnum等于模板属性可选值加自定义属性可选值
        items:
          $ref: '#/definitions/productSetupAttrDeail'
      productCustomAttributes:
        type: array
        description: 自定义属性集合
        items:
          $ref: '#/definitions/productCustomAttributeResp'
      productSpecs:
        type: array
        items:
          $ref: '#/definitions/spProductSpecResp'
      products:
        type: array
        items:
           $ref: '#/definitions/productDetail'
  
  specLinkUuids:
    type: object
    description: 服务商实例关联UUID
    properties:
      productSpecUuid:
        type: string
        description: 服务商实例UUID
      linkSpecUuid:
        type: string
        description: 被组合的实例UUID
      cpSpecAttrs:
        type: array
        description: 被绑定供应商实例属性集合
        items:
          $ref: '#/definitions/productSpecAttributeResp'
          
  spProductGroupPut:
    type: object
    description: 产品基础信息返回对象
    allOf:
    - $ref: '#/definitions/product'
    - $ref: '#/definitions/productStatus'
    properties:
      uuid:
        type: string
        description: 产品UUID
      productSetupAttributes:
        type: array
        description: 模板属性集合
        items:
          $ref: '#/definitions/productSetupAttributeResp'
      productCustomAttributes:
        type: array
        description: 自定义属性集合
        items:
          $ref: '#/definitions/productCustomAttributeResp'
      productSpecs:
        type: array
        items:
          $ref: '#/definitions/spProductSpecPut'
  stock:
    type: object
    description: 库存
    properties:
      uuids:
        type: string
        description: 产品UUID
      operate:
        type: string
        description: 操作类型 1 增加库存  0 减少库存
      num:
        type: integer
        description: 数量
  product:
    type: object
    description: 产品基础信息
    required:
      - typeId
      - productName
    properties:
      typeId:
        type: integer
        description: 产品类别ID 必填
      partnerId:
        type: integer
        description: 合作伙伴ID 必填
        format: int32
      partnerType:
        type: string
        enum:
          - "0100"
          - "0010"
        description: 合作伙伴类型 供应商:"0010"  服务商:"0100"  必填
      productCode:
        type: string
        description: 产品编码 0内商城(供应商产品)，1 外商城(服务商产品)+时间戳的13位数字组成
        maxLength: 20
      productName:
        type: string
        description: 产品名称  同一个合作伙伴的产品名称不能重复
        minLength: 1
        maxLength: 20
      productType:
        type: string
        description: 产品类型  single:单产品(供应商产品)  group:捆绑产品(服务商产品)
        enum:
         - "single"
         - "group"
        maxLength: 6
      productInfo:
        type: string
        description: 产品信息  无长度限制
        minLength: 1
      images:
        type: string
        description: 产品封面图  image1URL,image2URL 产品封面图 最多允许5张 
        maxLength: 2000
      contract:
        type: string
        description: 产品所需合同   合同1，合同2 多个合同以逗号分割
        maxLength: 100
      qualification:
        type: string
        description: 产品所需资质  资质1，资质2  多个资质以逗号分割
        maxLength: 100
      createUserid:
        type: integer
        description: 创建人用户ID
      specMinPrice:
        type: number
        format: float(10,2)
        description: 产品所属实例最低售价 界面选择按价格排序以最低售价为排序规则  
      specMaxPrice:
        type: number
        format: float(10,2)
        description: 产品所属实例最高售价
      tempStatus:
        type: string
        description: 1为正式产品 0为草稿
        maxLength: 1
        enum:
          - "1"
          - "0"
  
  productSpecPost:
    type: object
    description: 产品实例集合
    allOf:
    - $ref: '#/definitions/productSpec'
    properties:
      productSpecAttributes:
        type: array
        items:
          $ref: '#/definitions/productSpecAttribute'
  
  productSpec:
    type: object
    description: 产品实例基础信息
    required:
      - sellPrice
      - stock
    properties:
      productSpecName:
        type: string
        description: 产品实例名称 
        minLength: 1
        maxLength: 20
      sellPrice:
        type: number
        format: float
        description: 产品实例供应价格 必填
        minimum: 1.00
        maximum: 1000000.00
      stock:
        type: integer
        description: 产品实例库存  必填  服务商新建产品读取组合实例最小库存
        minimum: 0
        maximum: 1000000000
      productSales:
        type: integer
        description: 实例销量
        
  
  productStatus:
    type: object
    properties:
      saleFlag:
        type: string
        enum:
          - "1"
          - "0"
        description: 上下架标志 '0' 下架  '1' 上架 

  products:
    type: object
    properties:
      uuid:
        type: string
        description: 产品UUID
      typeName:
        type: string
        description: 所属品类名称
      stock:
        type: integer
        description: 产品所属实例库存总和
      createTime:
        type: string
        format: date-time
        description: 创建时间
      modifyTime:
        type: string
        format: date-time
        description: 修改时间
      productSales:
        type: integer
        format: int32
        description: 实例所属实例销量总和
      #productSpec:
      #  type: array
      #  items:
      #    $ref: '#/definitions/productSpecs'
    allOf:
    - $ref: '#/definitions/productStatus'
    - $ref: '#/definitions/product'
    
  productPages:
    type: object
    description: 产品分页对象
    properties:
      page:
        $ref: '#/definitions/page'
      products:
        type: array
        items:
          $ref: '#/definitions/products'
          
  page:
    type: object
    description: 分页信息
    properties:
      page:
        type: integer
        description: 当前页码
      nextPage:
        type: integer
        description: 下一页页码
      prePage:
        type: integer
        description: 上一页页码
      totalPages:
        type: integer
        description: 总页数
      totalCount:
        type: integer
        description: 总记录数
      firstPage:
        type: boolean
        description: 是否为首页
      lastPage:
        type: boolean
        description: 是否为尾页
      hasPrePage:
        type: boolean
        description: 是否有上一页
      hasNextPage:
        type: boolean
        description: 是否有下一页
      startRow:
        type: integer
        description: 当前页起始行
      endRow:
        type: integer
        description: 当前页结束行
  
  rows:
    type: object
    properties:
      rowNum:
        type: integer
        description: 影响行数
  
  errorModel:
    type: object
    required:
    - code
    - message
    - errors
    properties:
      code:
        type: integer
        format: int32
        description: 404  400  500
      message:
        type: string
        description: 错误描述  资源不存在  参数异常   服务器内部错误
      errors:
        type: array
        items:
          properties:
            field:
              type: string
              description: 错误字段
            message:
              type: string
              description: 错误原因  如“产品分类不能重复”

  